'use strict';

const Joi = require('joi');
const buildSchema = require('./../build-schema');
const common = require('../common');

const baseFields = {
  id: common.id,
  access_code: Joi.string().max(255).description('Access code for SaversGuide.'),
  account_login: Joi.string().max(255).description('Account login for DiningDollars.'),
  passcode: Joi.string().max(255).description('Passcode for DiningDollars.'),
  user_id: common.id,
  transaction_id: common.id,
  type: Joi.string().valid('SaversGuide', 'DiningDollars', 'EntertainmentBundle'),
  description: common.description,
  purchased: Joi.number().integer().max(1).description('Flag for this access code. If 0, access code is not purchased. If 1, access code is purchased by a user and cannot be repurchased/reused.'),
  purchase_value: Joi.number().integer().description('Purchase amount of the access code in the lowest subdivision of the currency, e.g. cents for USD.'),
  date_tracked: Joi.date().iso().description('Timestamp when the access code was added to the system.'),
  date_default: Joi.date().iso().description('Timestamp when the access code will expire in the system if not purchased. By default this is one year from date_tracked.'),
  date_purchase: Joi.date().iso().description('Timestamp when the access code was purchased by an user.'),
  date_expiration: Joi.date().iso().description('Timestamp when the access code will expire for the purchased user. By default this is one year from date_purchase.')
};

const requiredForPost = [];

const attributeFields = {};

const additionalForbiddenAttribs = [];

module.exports = buildSchema(baseFields, requiredForPost, attributeFields, additionalForbiddenAttribs);
