'use strict';

const Joi = require('joi');
const buildSchema = require('./../build-schema');
const common = require('../common');

const baseFields = {
  id: common.id,
  merchant_affiliate_id: Joi.string().max(100),
  merchant_affiliate_name: Joi.string().max(100),
  name: common.name,
  slug: common.slug,
  description: common.description,
  type: Joi.string().valid('multiplier', 'incremental'),
  uses: Joi.number().integer().min(0).allow(null),
  percentage: Joi.number().integer().min(0),
  lifetime_in_seconds: Joi.number().integer().min(0),
  maximum: Joi.number().integer().min(0).allow(null),
  lifetime_maximum: Joi.number().integer().min(0).allow(null),
  currency: Joi.string().regex(/^[a-zA-Z]{3}$/).allow(null),
  deny_commission: Joi.number().integer().max(1),
  vip: Joi.number().integer().max(1).description('0/1 flag representing whether a mod is part of the current VIP package'),
  active: common.active
};

const requiredForPost = [];

const attributeFields = {};

const additionalForbiddenAttribs = [];

module.exports = buildSchema(baseFields, requiredForPost, attributeFields, additionalForbiddenAttribs);
