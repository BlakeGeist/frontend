'use strict';

const _ = require('lodash');
const Joi = require('joi');
const buildSchema = require('./../build-schema');
const common = require('../common');

const baseFields = {
  id: common.id,
  warm_date: Joi.date().iso(),
  active_date: Joi.date().iso(),
  closing_date: Joi.date().iso(),
  closed_date: Joi.date().iso()
};

const detailFields = {
  id: common.id,
  shopping_event_id: common.id,
  name: common.name,
  slug: common.slug,
  lang: common.lang,
  region: common.region,
  state: Joi.string(),

  warm_detail_id: common.id,
  active_detail_id: common.id,
  closing_detail_id: common.id,
  closed_detail_id: common.id,

  active: common.active,

  warm_description: common.description.allow(null, ''),
  warm_details: Joi.string().allow(null, ''),
  warm_seo_title: Joi.string().max(255).allow(null, ''),
  warm_seo_keywords: Joi.string().max(255).allow(null, ''),
  warm_display_main_title: Joi.string().max(255).allow(null, ''),
  warm_display_sub_title: Joi.string().max(255).allow(null, ''),
  warm_facebook_share_text: Joi.string().allow(null, ''),
  warm_facebook_post_text: Joi.string().allow(null, ''),
  warm_facebook_direct_text: Joi.string().allow(null, ''),
  warm_twitter_share_text: Joi.string().max(255).allow(null, ''),
  warm_twitter_post_text: Joi.string().max(255).allow(null, ''),
  warm_twitter_direct_text: Joi.string().max(255).allow(null, ''),
  warm_featured_merchant_id: common.id.allow(null, ''),
  warm_banner_wide_asset_id: common.id.allow(null, ''),
  warm_banner_email_asset_id: common.id.allow(null, ''),
  warm_banner_mobile_asset_id: common.id.allow(null, ''),
  warm_banner_environment_asset_id: common.id.allow(null, ''),
  warm_collection_card_asset_id: common.id.allow(null, ''),
  warm_social_share_asset_id: common.id.allow(null, ''),
  warm_twitter_header_asset_id: common.id.allow(null, ''),
  warm_facebook_cover_asset_id: common.id.allow(null, ''),

  active_description: common.description.allow(null, ''),
  active_details: Joi.string().allow(null, ''),
  active_seo_title: Joi.string().max(255).allow(null, ''),
  active_seo_keywords: Joi.string().max(255).allow(null, ''),
  active_display_main_title: Joi.string().max(255).allow(null, ''),
  active_display_sub_title: Joi.string().max(255).allow(null, ''),
  active_facebook_share_text: Joi.string().allow(null, ''),
  active_facebook_post_text: Joi.string().allow(null, ''),
  active_facebook_direct_text: Joi.string().allow(null, ''),
  active_twitter_share_text: Joi.string().max(255).allow(null, ''),
  active_twitter_post_text: Joi.string().max(255).allow(null, ''),
  active_twitter_direct_text: Joi.string().max(255).allow(null, ''),
  active_featured_merchant_id: common.id.allow(null, ''),
  active_banner_wide_asset_id: common.id.allow(null, ''),
  active_banner_email_asset_id: common.id.allow(null, ''),
  active_banner_mobile_asset_id: common.id.allow(null, ''),
  active_banner_environment_asset_id: common.id.allow(null, ''),
  active_collection_card_asset_id: common.id.allow(null, ''),
  active_social_share_asset_id: common.id.allow(null, ''),
  active_twitter_header_asset_id: common.id.allow(null, ''),
  active_facebook_cover_asset_id: common.id.allow(null, ''),

  closing_description: common.description.allow(null, ''),
  closing_details: Joi.string().allow(null, ''),
  closing_seo_title: Joi.string().max(255).allow(null, ''),
  closing_seo_keywords: Joi.string().max(255).allow(null, ''),
  closing_display_main_title: Joi.string().max(255).allow(null, ''),
  closing_display_sub_title: Joi.string().max(255).allow(null, ''),
  closing_facebook_share_text: Joi.string().allow(null, ''),
  closing_facebook_post_text: Joi.string().allow(null, ''),
  closing_facebook_direct_text: Joi.string().allow(null, ''),
  closing_twitter_share_text: Joi.string().max(255).allow(null, ''),
  closing_twitter_post_text: Joi.string().max(255).allow(null, ''),
  closing_twitter_direct_text: Joi.string().max(255).allow(null, ''),
  closing_featured_merchant_id: common.id.allow(null, ''),
  closing_banner_wide_asset_id: common.id.allow(null, ''),
  closing_banner_email_asset_id: common.id.allow(null, ''),
  closing_banner_mobile_asset_id: common.id.allow(null, ''),
  closing_banner_environment_asset_id: common.id.allow(null, ''),
  closing_collection_card_asset_id: common.id.allow(null, ''),
  closing_social_share_asset_id: common.id.allow(null, ''),
  closing_twitter_header_asset_id: common.id.allow(null, ''),
  closing_facebook_cover_asset_id: common.id.allow(null, ''),

  closed_description: common.description.allow(null, ''),
  closed_details: Joi.string().allow(null, ''),
  closed_seo_title: Joi.string().max(255).allow(null, ''),
  closed_seo_keywords: Joi.string().max(255).allow(null, ''),
  closed_display_main_title: Joi.string().max(255).allow(null, ''),
  closed_display_sub_title: Joi.string().max(255).allow(null, ''),
  closed_facebook_share_text: Joi.string().allow(null, ''),
  closed_facebook_post_text: Joi.string().allow(null, ''),
  closed_facebook_direct_text: Joi.string().allow(null, ''),
  closed_twitter_share_text: Joi.string().max(255).allow(null, ''),
  closed_twitter_post_text: Joi.string().max(255).allow(null, ''),
  closed_twitter_direct_text: Joi.string().max(255).allow(null, ''),
  closed_featured_merchant_id: common.id.allow(null, ''),
  closed_banner_wide_asset_id: common.id.allow(null, ''),
  closed_banner_email_asset_id: common.id.allow(null, ''),
  closed_banner_mobile_asset_id: common.id.allow(null, ''),
  closed_banner_environment_asset_id: common.id.allow(null, ''),
  closed_collection_card_asset_id: common.id.allow(null, ''),
  closed_social_share_asset_id: common.id.allow(null, ''),
  closed_twitter_header_asset_id: common.id.allow(null, ''),
  closed_facebook_cover_asset_id: common.id.allow(null, '')
};

const requiredForPost = [];

const attributeFields = {};

const additionalForbiddenAttribs = ['isWarm', 'isActive', 'isClosing', 'isClosed'];

module.exports = buildSchema(_.merge(baseFields, detailFields), requiredForPost, attributeFields, additionalForbiddenAttribs);
